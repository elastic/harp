project_name: harp

before:
  hooks:
    - go mod tidy
    - go mod vendor

builds:
  - main: './cmd/harp'
    env:
      - CGO_ENABLED=0
    mod_timestamp: '{{ .CommitTimestamp }}'
    flags:
      - -trimpath
    ldflags:
      - '-s'
      - '-w'
      - '-X github.com/elastic/harp/build/version.Name=harp'
      - '-X github.com/elastic/harp/build/version.AppName=github.com/elastic/harp/cmd/harp'
      - '-X github.com/elastic/harp/build/version.Version={{.Version}}'
      - '-X github.com/elastic/harp/build/version.Commit={{.CommitDate}}'
      - '-X github.com/elastic/harp/build/version.Branch={{.Branch}}'
      - '-X github.com/elastic/harp/build/version.BuildDate={{.Date}}'
      - '-X github.com/elastic/harp/build/version.BuildTags=defaults'
    targets:
      - darwin_amd64
      - darwin_arm64
      - linux_amd64
      - linux_arm
      - linux_arm64
      - windows_amd64
      - windows_arm
      - windows_arm64
    binary: '{{ .ProjectName }}'

archives:
  - format: binary

checksum:
  disable: true

release:
  disable: true

changelog:
  skip: true
